# פרויקט KeyLogger

## סקירה כללית
פרויקט KeyLogger הוא מערכת מעקב מקלדת מבוססת לקוח-שרת המאפשרת ניטור ורישום של הקשות מקלדת במחשבי קצה. המערכת מורכבת משני חלקים עיקריים:

1. **KeyLoggerAgent** - יישום לקוח שרץ על מחשבי היעד ואוסף נתוני הקלדה
2. **KeyLoggerServer** - שרת מרכזי המקבל, מאחסן ומציג את הנתונים שנאספו

# מטרה:
פרויקט זה מיועד לשימושים לגיטימיים בלבד כגון:
- למידה
- ניטור מערכות IT בארגונים
- בקרת שימוש במחשבים ציבוריים

## מאפיינים עיקריים
- תיעוד הקשות מקלדת בזמן אמת
- הצפנת נתונים לשמירה על בטיחות המידע
- ממשק ווב לניהול וצפייה בנתונים
- אימות משתמשים עם JWT
- ניתוח נתונים לפי מכונות, חלונות פעילים וזמנים
- יכולת כיבוי מרחוק של סוכני הניטור

## דרישות מערכת
- Python 3.6 ומעלה
- התקנת ספריות המפורטות ב-`requirements.txt`

## התקנה

### התקנת שרת
1. התקן את הספריות הנדרשות:
```bash
pip install -r requirements.txt
```

2. נווט לתיקיית KeyLoggerServer:
```bash
cd KeyLoggerServer
```

3. בצע התאמות בקובץ .env (סיסמה סודית):
```
SECRET_KEY=YourSecretKey
```

4. הפעל את השרת:
```bash
python app.py
```
השרת יפעל בכתובת http://127.0.0.1:9734 (כברירת מחדל)

### התקנת סוכן (במחשבי היעד)
1. התקן את הספריות הנדרשות:
```bash
pip install -r requirements.txt
```

2. נווט לתיקיית KeyLoggerAgent:
```bash
cd KeyLoggerAgent
```

3. עדכן את קובץ התצורה `config.yaml` עם כתובת השרת הנכונה:
```yaml
general:
  base_url: http://[כתובת_השרת]:9734/
```

4. הפעל את הסוכן:
```bash
python main.py
```

## ארכיטקטורה

### KeyLoggerAgent
הסוכן מורכב מהרכיבים הבאים:
- **main.py** - נקודת הכניסה הראשית, יוצרת חיבור לשרת ורושמת את המכונה
- **manager.py** - מנהל את תהליך ההקלטה והשליחה של נתונים לשרת
- **service.py** - מספק שירותים להקלטת מקשים, כתיבה לקבצים והצפנה
- **Interface.py** - מגדיר ממשקים לפונקציונליות הדרושה
- **ToolBox.py** - כלי עזר שונים, כולל זיהוי שפה במקלדת ופורמט מקשים

### KeyLoggerServer
השרת מורכב מהרכיבים הבאים:
- **app.py** - יישום Flask המספק את ה-API וממשק המשתמש
- **ToolBox.py** - פונקציות עזר לפיענוח, מיזוג נתונים וקיבוץ מידע
- **templates/** - תבניות HTML לממשק המשתמש
- **static/** - קבצי CSS, JavaScript ונכסים סטטיים אחרים
- **logs/** - תיקייה לאחסון הנתונים שנאספו

## API ואבטחה
המערכת משתמשת בטוקני JWT לאימות. נתונים מועברים באופן מאובטח באמצעות הצפנה סימטרית, כאשר מפתח ייחודי נוצר עבור כל מכונה מנוטרת.

## תרשים זרימת עבודה
1. Agent מתחיל ורושם את עצמו בשרת
2. השרת מייצר מספר סידורי ומפתח הצפנה עבור הסוכן
3. הסוכן מקליט הקשות מקלדת ושומר אותן לפי חלון פעיל וזמן
4. הנתונים מוצפנים ונשלחים לשרת כל 10 שניות
5. השרת מפענח ומאחסן את הנתונים
6. ניתן לצפות בנתונים דרך ממשק הFrontEnd

## התחברות לממשק הניהול
1. גש לכתובת השרת בדפדפן http://[כתובת_השרת]:9734/login
2. התחבר עם שם משתמש וסיסמה (ברירת המחדל: user1/password1)
3. לאחר התחברות מוצלחת תוכל לצפות ברשימת המכונות המנוטרות ובפעילות שלהן

## תחזוקה ועדכונים
- ניתן לקבל עדכונים מהmain באמצעות הרצת סקריפט update.sh:
```bash
chmod +x update.sh
./update.sh
```

## הערות אבטחה
- שנה את פרטי ההתחברות ברירת המחדל בקובץ `users.json`
- עדכן את המפתח הסודי ב-`.env` למפתח מורכב יותר

## פתרון בעיות נפוצות
- **בעיית חיבור לשרת**: ודא שכתובת השרת מוגדרת נכון ב-`config.yaml`
- **שגיאות הרשאות**: ודא שיש הרשאות כתיבה לתיקיית הלוגים
- **התנתקות מהירה**: בדוק את תוקף טוקן ה-JWT ב-`app.py`


יש להקפיד על קבלת הסכמה מתאימה לפני התקנת הסוכן על מחשבי משתמשים.
